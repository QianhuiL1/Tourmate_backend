<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.travelers.data.mapper.TravelersAttractionMapper">
    
    <resultMap type="TravelersAttraction" id="TravelersAttractionResult">
        <result property="AttractionID"    column="AttractionID"    />
        <result property="AttractionName"    column="AttractionName"    />
        <result property="Location"    column="Location"    />
        <result property="Star"    column="Star"    />
        <result property="Type"    column="Type"    />
        <result property="Comment"    column="Comment"    />
        <result property="Description"    column="Description"    />
    </resultMap>

    <sql id="selectTravelersAttractionVo">
        select AttractionID, AttractionName, Location, Star, Type, Comment, Description from attraction
    </sql>

    <select id="selectTravelersAttractionList" parameterType="TravelersAttraction" resultMap="TravelersAttractionResult">
        <include refid="selectTravelersAttractionVo"/>
        <where>  
            <if test="AttractionName != null  and AttractionName != ''"> and AttractionName like concat('%', #{AttractionName}, '%')</if>
            <if test="Location != null  and Location != ''"> and Location = #{Location}</if>
            <if test="Star != null "> and Star = #{Star}</if>
            <if test="Type != null  and Type != ''"> and Type = #{Type}</if>
            <if test="Comment != null "> and Comment = #{Comment}</if>
            <if test="Description != null  and Description != ''"> and Description = #{Description}</if>
        </where>
    </select>
    
    <select id="selectTravelersAttractionByAttractionID" parameterType="Long" resultMap="TravelersAttractionResult">
        <include refid="selectTravelersAttractionVo"/>
        where AttractionID = #{AttractionID}
    </select>
        
    <insert id="insertTravelersAttraction" parameterType="TravelersAttraction">
        insert into attraction
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="AttractionID != null">AttractionID,</if>
            <if test="AttractionName != null">AttractionName,</if>
            <if test="Location != null">Location,</if>
            <if test="Star != null">Star,</if>
            <if test="Type != null">Type,</if>
            <if test="Comment != null">Comment,</if>
            <if test="Description != null">Description,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="AttractionID != null">#{AttractionID},</if>
            <if test="AttractionName != null">#{AttractionName},</if>
            <if test="Location != null">#{Location},</if>
            <if test="Star != null">#{Star},</if>
            <if test="Type != null">#{Type},</if>
            <if test="Comment != null">#{Comment},</if>
            <if test="Description != null">#{Description},</if>
         </trim>
    </insert>

    <update id="updateTravelersAttraction" parameterType="TravelersAttraction">
        update attraction
        <trim prefix="SET" suffixOverrides=",">
            <if test="AttractionName != null">AttractionName = #{AttractionName},</if>
            <if test="Location != null">Location = #{Location},</if>
            <if test="Star != null">Star = #{Star},</if>
            <if test="Type != null">Type = #{Type},</if>
            <if test="Comment != null">Comment = #{Comment},</if>
            <if test="Description != null">Description = #{Description},</if>
        </trim>
        where AttractionID = #{AttractionID}
    </update>

    <delete id="deleteTravelersAttractionByAttractionID" parameterType="Long">
        delete from attraction where AttractionID = #{AttractionID}
    </delete>

    <delete id="deleteTravelersAttractionByAttractionIDs" parameterType="String">
        delete from attraction where AttractionID in 
        <foreach item="AttractionID" collection="array" open="(" separator="," close=")">
            #{AttractionID}
        </foreach>
    </delete>
</mapper>